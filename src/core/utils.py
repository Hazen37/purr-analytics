# src/utils.py

"""
Вспомогательные утилиты, которые не относятся напрямую к API или БД.

Сейчас здесь:
- извлечение customer_id из номера заказа/отправления Ozon.
"""


def extract_customer_id(posting_number: str) -> str:
    """
    Извлекает идентификатор клиента из номера отправления.

    По информации от поддержки Ozon:
    - первая часть ID заказа до первого дефиса — это уникальный ID клиента.
      Например:
        "47633921-0235-1" -> "47633921"
        "12345678-9999-2" -> "12345678"

    Поэтому:
    - делим строку по символу "-"
    - берём первый элемент

    Если формат окажется неожиданным (нет дефисов) — вернём строку целиком.
    Это безопаснее, чем падать с ошибкой.
    """
    if not posting_number:
        return ""

    parts = posting_number.split("-")
    if not parts:
        return posting_number

    return parts[0]